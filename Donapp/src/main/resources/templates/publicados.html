<!DOCTYPE html>
<html lang="es">
<head th:replace="~{fragments/header}" />
<body>

	<nav th:replace="~{fragments/navbar}" />
	
	<img class="miImg2 d-block w-100" src="img/publicados.jpg" alt="Productos">
	
    <div class="container mt-4">
        <h2> Mis publicaciones </h2>
        <div class="row">
        
        	<div class="col-md-4 mb-4" th:if="${productos.empty}">
        	  No hay productos que mostrar
        	</div>
        
            <div class="col-md-4 mb-4" th:each="producto : ${productos}" th:if="${producto.interesado == null}">
            
            	<div class="card">
                    <img th:src="'data:image/jpeg;base64,' + ${producto.fotoEncoded}" class="card-img-top" alt="Producto 1" style="object-fit: cover; height: 30vh;">
                    <div class="card-body">
                        <h5 class="card-title"><span th:text="${producto.titulo}"> </span></h5>
                        <a th:href="${'/producto/'+producto.id}" class="btn custom-button">Ver Más</a>
                        <a class="btn btn-danger" th:onclick="'confirmarEliminarProducto(' + ${producto.id} + ')'">Eliminar producto</a>
                    </div>
                </div>
                
            </div>
            
        </div>
    </div>
    
    <hr>
	
    <nav th:replace="~{fragments/footer}" />
    
    <script th:inline="javascript">
	    function confirmarEliminarProducto(productoId) {
	        var confirmacion = confirm('¿Estás seguro de que quieres eliminar este producto?');
	        if (confirmacion) {
	            window.location.href = '/eliminarProducto/' + productoId;
	        }
	    }
	</script>

</body>
</html>